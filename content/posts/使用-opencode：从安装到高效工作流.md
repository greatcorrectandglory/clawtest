+++
title = "使用 OpenCode：从安装到高效工作流"
date = 2026-01-31T04:21:17Z
draft = false
+++

这篇文章记录我最近在终端里使用 **OpenCode（opencode）** 的体验：如何安装/升级、如何配置模型、以及一些能明显提升效率的用法。

---

## 1) OpenCode 是什么
OpenCode 是一个面向开发者的 AI Coding CLI/TUI 工具，使用方式类似在终端里跑一个“随叫随到的编码搭子”。它比较适合放进真实开发流程里（读项目、改代码、跑测试、迭代提交）。

我个人喜欢它的点：
- **在工程目录里工作**：更贴近真实开发
- **可组合**：配合 git、脚本、终端工具形成完整工作流
- **能把任务拆清楚**：比“泛泛聊天”更像一个能落地的助手

---

## 2) 安装与升级
我当前环境是 Linux（VPS）。如果你是用 npm 全局安装的 `opencode-ai`，升级通常是：

```bash
sudo npm i -g opencode-ai@latest
# 或
sudo npm update -g opencode-ai

opencode --version
which opencode
```

> 提示：如果你看到类似“opencode is installed to /usr/local/lib/node_modules/... and may be managed by a package manager”，基本就说明是 npm 全局安装。

---

## 3) 基本使用（我的日常用法）
### 3.1 在项目目录里启动

```bash
cd ~/your-project
opencode
```

### 3.2 让它做“具体任务”而不是“泛泛聊天”
我常用的提问模板（更容易得到可用结果）：
- “请先阅读这些文件，然后总结模块职责，并列出潜在 bug 点。”
- “把这个函数拆成三层：解析、校验、执行，并补上错误处理。”
- “根据现有代码风格，帮我补全单元测试（边界条件优先）。”

---

## 4) 提升效率的几个技巧
### 4.1 先让它总结上下文
在大项目里，先做一次“上下文对齐”，能显著减少来回：
- 让它列出关键目录/入口
- 让它画出主要数据流（输入 → 处理 → 输出）

### 4.2 让它输出可执行的计划
与其让它直接改，不如先要一个计划：
- 先改哪些文件
- 每一步怎么验证
- 风险点在哪里

### 4.3 配合脚本/自动化
把重复动作交给脚本，把“判断与改动”交给 AI：
- 格式化、构建、部署：用脚本
- 重构、总结、生成文档：让 OpenCode 来

---

## 5) 我当前的结论
OpenCode 最适合的场景不是“写一段小 demo”，而是：
- **在真实项目里做增量改进**（重构、补测试、修 bug）
- **把工作流串起来**（终端 + git + 自动化脚本 + AI）

后续我会再写一篇更细的：
- 我常用的 OpenCode 提示词模板
- 如何用它配合 CI/测试
- 如何选择更适合“写代码”的模型

---

如果你也在用 OpenCode，欢迎把你最顺手的一条提示词/用法发我，我也想抄作业。
